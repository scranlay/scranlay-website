//$(window).on("load",function(){$("#preloader").fadeOut("slow",function(){$(this).remove()})}),function(e){"use strict";e(".play-icon i").click(function(){var t='<iframe allowfullscreen src="'+e(this).attr("data-video")+'"></iframe>';e(this).replaceWith(t)}),setTimeout(function(){var t=e(".filtr-container").filterizr({});e(".filtr-control").on("click",function(){e(".filtr-control").removeClass("active"),e(this).addClass("active")})},500),e(".testimonial-slider").slick({slidesToShow:2,slidesToScroll:1,infinite:!0,arrows:!1,autoplay:!0,autoplaySpeed:2e3,responsive:[{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]}),e(".clients-logo-slider").slick({infinite:!0,arrows:!1,autoplay:!0,autoplaySpeed:2e3,slidesToShow:5,slidesToScroll:1}),e(".company-gallery").slick({infinite:!0,arrows:!1,autoplay:!0,autoplaySpeed:2e3,slidesToShow:5,slidesToScroll:1}),e(".counter").each(function(){var t=e(this),n=t.attr("data-count");e({countNum:t.text()}).animate({countNum:n},{duration:1500,easing:"linear",step:function(){t.text(Math.floor(this.countNum))},complete:function(){t.text(this.countNum)}})}),e("#contact-submit").click(function(t){t.preventDefault();var n=!1,o=e("#name").val(),s=e("#email").val(),i=e("#subject").val(),a=e("#message").val();o.length==0?(n=!0,e("#name").css("border-color","#D8000C")):e("#name").css("border-color","#666"),s.length==0||s.indexOf("@")=="-1"?(n=!0,e("#email").css("border-color","#D8000C")):e("#email").css("border-color","#666"),i.length==0?(n=!0,e("#subject").css("border-color","#D8000C")):e("#subject").css("border-color","#666"),a.length==0?(n=!0,e("#message").css("border-color","#D8000C")):e("#message").css("border-color","#666"),n==!1&&(e("#contact-submit").attr({disabled:"false",value:"Sending..."}),e.post("sendmail.php",e("#contact-form").serialize(),function(t){t=="sent"?(e("#cf-submit").remove(),e("#mail-success").fadeIn(500)):(e("#mail-fail").fadeIn(500),e("#contact-submit").removeAttr("disabled").attr("value","Send The Message"))}))})}(jQuery),window.marker=null;
// Fade out preloader on window load
var preloaderTimeout;

// Show the preloader on page load
$(window).on("load", function() {
    // Cancel the timeout if the page loads before 5 seconds
    clearTimeout(preloaderTimeout);

    // Fade out the preloader
    $("#preloader").fadeOut("slow", function() {
        $(this).remove();
    });
});

// Set a timeout to fade out the preloader after 5 seconds
preloaderTimeout = setTimeout(function() {
    $("#preloader").fadeOut("slow", function() {
        $(this).remove();
    });
}, 5000);


// Video Player
(function($) {
    $(".play-icon i").click(function() {
        var videoIframe = '<iframe allowfullscreen src="' + $(this).attr("data-video") + '"></iframe>';
        $(this).replaceWith(videoIframe);
    });
})(jQuery);

// Filterizr Initialization
setTimeout(function() {
    var filterizr = $(".filtr-container").filterizr({});
    $(".filtr-control").on("click", function() {
        $(".filtr-control").removeClass("active");
        $(this).addClass("active");
    });
}, 500);

// Testimonial Slider
$(".testimonial-slider").slick({
    slidesToShow: 2,
    slidesToScroll: 1,
    infinite: true,
    arrows: false,
    autoplay: true,
    autoplaySpeed: 2000,
    responsive: [{
        breakpoint: 600,
        settings: {
            slidesToShow: 1,
            slidesToScroll: 2
        }
    }, {
        breakpoint: 480,
        settings: {
            slidesToShow: 1,
            slidesToScroll: 1
        }
    }]
});

// Clients Logo Slider
$(".clients-logo-slider").slick({
    slidesToShow: 5,
    slidesToScroll: 1,
    infinite: true,
    arrows: false,
    autoplay: true,
    autoplaySpeed: 2000
});

// Company Gallery Slider
$(".company-gallery").slick({
    slidesToShow: 5,
    slidesToScroll: 1,
    infinite: true,
    arrows: false,
    autoplay: true,
    autoplaySpeed: 2000
});

// Counter Animation
$(".counter").each(function() {
    var $this = $(this),
        countTo = $this.attr("data-count");
    $({ countNum: $this.text() }).animate({
        countNum: countTo
    }, {
        duration: 1500,
        easing: "linear",
        step: function() {
            $this.text(Math.floor(this.countNum));
        },
        complete: function() {
            $this.text(this.countNum);
        }
    });
});

// Contact Form Submission Handling
$("#contact-submit").click(function(e) {
    e.preventDefault();
    var formValid = true,
        name = $("#name").val(),
        email = $("#email").val(),
        subject = $("#subject").val(),
        message = $("#message").val();

    if (name.length === 0) {
        formValid = false;
        $("#name").css("border-color", "#D8000C");
    } else {
        $("#name").css("border-color", "#666");
    }

    if (email.length === 0 || email.indexOf("@") === -1) {
        formValid = false;
        $("#email").css("border-color", "#D8000C");
    } else {
        $("#email").css("border-color", "#666");
    }

    if (subject.length === 0) {
        formValid = false;
        $("#subject").css("border-color", "#D8000C");
    } else {
        $("#subject").css("border-color", "#666");
    }

    if (message.length === 0) {
        formValid = false;
        $("#message").css("border-color", "#D8000C");
    } else {
        $("#message").css("border-color", "#666");
    }

    if (formValid) {
        $("#contact-submit").attr({
            disabled: "false",
            value: "Sending..."
        });

        $.post("sendmail.php", $("#contact-form").serialize(), function(response) {
            if (response === "sent") {
                $("#cf-submit").remove();
                $("#mail-success").fadeIn(500);
            } else {
                $("#mail-fail").fadeIn(500);
                $("#contact-submit").removeAttr("disabled").attr("value", "Send The Message");
            }
        });
    }
});

// Global variable declaration
window.marker = null;

/*function initialize(){var n,s,o=$("#map").data("lat"),i=$("#map").data("long"),t=new google.maps.LatLng(o,i),a=[{stylers:[{hue:"#ff61a6"},{visibility:"on"},{invert_lightness:!0},{saturation:40},{lightness:10}]}],r={center:t,mapTypeId:google.maps.MapTypeId.ROADMAP,zoom:9,backgroundColor:"#000",zoom:17,panControl:!1,zoomControl:!0,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,overviewMapControl:!1,zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE}},e=new google.maps.Map(document.getElementById("map"),r),c=new google.maps.StyledMapType(a,{name:"Grayscale"});e.mapTypes.set("grey",c),e.setMapTypeId("grey"),n=$("#map").data("marker"),s=new google.maps.MarkerImage(n,null,null,null,new google.maps.Size(25,33)),marker=new google.maps.Marker({position:t,map:e,icon:s,title:"navigator"})}var map=$("#map");map.length!=0&&google.maps.event.addDomListener(window,"load",initialize)*/

// custom cursor

document.addEventListener('DOMContentLoaded', () => {
  const customCursor = document.querySelector('.custom-cursor');

  function updateCursorPosition(e) {
    customCursor.style.left = `${e.clientX}px`;
    customCursor.style.top = `${e.clientY}px`;
  }

  document.addEventListener('mousemove', updateCursorPosition);

  window.addEventListener('scroll', () => {
    const e = {
      clientX: window.pageXOffset + window.innerWidth / 2,
      clientY: window.pageYOffset + window.innerHeight / 2,
    };
    updateCursorPosition(e);
  });

  const links = document.querySelectorAll('a');
  links.forEach((link) => {
    link.addEventListener('mouseover', () => {
      customCursor.style.width = '40px';
      customCursor.style.height = '40px';
    });

    link.addEventListener('mouseout', () => {
      customCursor.style.width = '20px';
      customCursor.style.height = '20px';
    });
  });
});

// Smooth scrolling function
function scrollToSection(event) {
  event.preventDefault(); // Prevent default link behavior

  const currentURL = window.location.href;
  const homePageURL = 'https://www.scranlaycontractor.com/en/'; // Change to the URL of your home page

  // Check if the current page is the home page
  if (currentURL === homePageURL) {
    // If it's the home page, scroll to the contact section
    const targetId = '#contact';
    let targetSection = document.querySelector(targetId);

    if (!targetSection) {
      console.error(`Target section "${targetId}" not found on the page.`);
      return;
    }

    const offset = -150; // Adjust this value to scroll further down
    const fixedElements = document.querySelectorAll('nav, header');
    let topOffset = 0;

    fixedElements.forEach(element => {
      topOffset += element.offsetHeight;
    });

    const elementPosition = targetSection.getBoundingClientRect().top;
    const offsetPosition = elementPosition + window.pageYOffset - topOffset - offset;

    window.scrollTo({
      top: offsetPosition,
      behavior: 'smooth'
    });
  } else {
    // If it's not the home page, redirect to the home page and then scroll to the contact section
    window.location.href = `${homePageURL}#contact`;
  }
}

// Add event listener to the "Contact us" button
const contactUsLink = document.querySelector('a[href="#contact"]');
contactUsLink.addEventListener('click', scrollToSection);

/// add classes for mobile navigation toggling
var CSbody = document.querySelector('body');
const CSnavbarMenu = document.querySelector('#cs-navigation');
const CShamburgerMenu = document.querySelector('#cs-navigation .cs-toggle');

CShamburgerMenu.addEventListener('click', function () {
	CShamburgerMenu.classList.toggle('cs-active');
	CSnavbarMenu.classList.toggle('cs-active');
	CSbody.classList.toggle('cs-open');
	// run the function to check the aria-expanded value
	ariaExpanded();
});

// checks the value of aria expanded on the cs-ul and changes it accordingly whether it is expanded or not
function ariaExpanded() {
	const csUL = document.querySelector('#cs-expanded');
	const csExpanded = csUL.getAttribute('aria-expanded');

	if (csExpanded === 'false') {
		csUL.setAttribute('aria-expanded', 'true');
	} else {
		csUL.setAttribute('aria-expanded', 'false');
	}
}

// mobile nav toggle code
const dropDowns = Array.from(document.querySelectorAll('#cs-navigation .cs-dropdown'));
for (const item of dropDowns) {
	const onClick = () => {
		item.classList.toggle('cs-active');
	};
	item.addEventListener('click', onClick);
}
                                
                                




